import subprocess
import pytest

FILENAME = "index.py"

# –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –∏ –æ–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥
test_cases = [
    ("3\n4\n5\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),
    ("10\n6\n3\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),
    ("5\n5\n5\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),
    ("1\n2\n3\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),
    ("7\n10\n5\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),
    ("0\n5\n7\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),  # –Ω—É–ª–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞
    ("3.5\n4.2\n5.1\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"),  # float
    ("2\n2\n4\n", "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")  # —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Å—É–º–º—ã –¥–≤—É—Ö —Å—Ç–æ—Ä–æ–Ω —Ç—Ä–µ—Ç—å–µ–π
]

@pytest.mark.parametrize("input_value, expected_output", test_cases)
def test_triangle_exists(input_value, expected_output):
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É
    process = subprocess.Popen(
        ['python3', FILENAME],
        stdin=subprocess.PIPE,
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE,
        text=True
    )
    stdout, stderr = process.communicate(input_value)

    # –†–∞–∑–±–∏–≤–∞–µ–º –≤—ã–≤–æ–¥ –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ —É–±–∏—Ä–∞–µ–º –ø—É—Å—Ç—ã–µ
    actual_lines = [line.strip() for line in stdout.split("\n") if line.strip()]

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—ã–≤–æ–¥ –µ—Å—Ç—å
    assert len(actual_lines) > 0, (
        "–ü–æ—Ö–æ–∂–µ, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç –Ω–∏—á–µ–≥–æ.\n"
        "–ü—Ä–æ–≤–µ—Ä—å, –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ª–∏ print() –∏ input() –ø—Ä–∞–≤–∏–ª—å–Ω–æ."
    )

    # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –≤—ã–≤–æ–¥–∞
    actual = actual_lines[0]

    # –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –æ–∂–∏–¥–∞–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
    assert actual == expected_output, (
        f"–û—à–∏–±–∫–∞ –≤ –≤—ã–≤–æ–¥–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã!\n\n"
        f"–í–≤–µ–¥–µ–Ω—ã —Å—Ç–æ—Ä–æ–Ω—ã: {input_value.replace(chr(10), ' / ')}\n"
        f"–û–∂–∏–¥–∞–ª–æ—Å—å: {expected_output}\n"
        f"–ü–æ–ª—É—á–µ–Ω–æ: {actual}\n\n"
        f"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —É—Å–ª–æ–≤–∏–µ 'and' –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —Ç—Ä—ë—Ö –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤."
    )

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –æ—à–∏–±–æ–∫ –≤ stderr –Ω–µ—Ç
    assert stderr.strip() == "", f"–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–∑–≤–∞–ª–∞ –æ—à–∏–±–∫—É:\n{stderr}"
